<h1 class="page-title">Dashboard</h1>

<!-- CARDS SUPERIORES -->
<div class="cards-row">

    <div class="card card-green">
        <h3>Equipamentos</h3>
        <p class="card-number"><%= totais.equipamentos %></p>
    </div>

    <div class="card card-orange">
        <h3>OS Abertas</h3>
        <p class="card-number"><%= totais.abertas %></p>
    </div>

    <div class="card card-blue">
        <h3>OS Fechadas</h3>
        <p class="card-number"><%= totais.fechadas %></p>
    </div>

</div>

<hr class="divider">

<!-- GRÁFICOS -->
<div class="charts-row">

    <div class="chart-box">
        <h3>Tipos de OS</h3>
        <canvas id="graficoTipos"></canvas>
    </div>

    <div class="chart-box">
        <h3>OS por mês</h3>
        <canvas id="graficoMes"></canvas>
    </div>

</div>

<hr class="divider">

<!-- ÚLTIMAS OS -->
<h2 class="sub-title">Últimas Ordens de Serviço</h2>

<table class="tabela tabela-dashboard">
    <tr>
        <th>ID</th>
        <th>Equipamento</th>
        <th>Tipo</th>
        <th>Status</th>
        <th>Abertura</th>
    </tr>

    <% ultimas.forEach(o => { %>
    <tr>
        <td><%= o.id %></td>
        <td><%= o.equipamento_nome || "-" %></td>
        <td><%= o.tipo || "-" %></td>

        <td>
            <% if (o.status === "aberta") { %>
                <span class="tag aberta">Aberta</span>
            <% } else { %>
                <span class="tag fechada">Fechada</span>
            <% } %>
        </td>

        <td><%= o.aberta_em %></td>
    </tr>
    <% }) %>
</table>

<!-- SCRIPT PARA OS GRÁFICOS -->
<script>
    // GRÁFICO DE TIPOS
    const ctx1 = document.getElementById('graficoTipos');

    new Chart(ctx1, {
        type: 'pie',
        data: {
            labels: [
                <% tipos.forEach(t => { %> "<%= t.tipo %>", <% }) %>
            ],
            datasets: [{
                data: [
                    <% tipos.forEach(t => { %> <%= t.total %>, <% }) %>
                ],
                backgroundColor: ["#27ae60", "#3498db", "#e67e22", "#9b59b6", "#e74c3c", "#16a085"]
            }]
        }
    });

    // GRÁFICO POR MÊS
    const ctx2 = document.getElementById('graficoMes');

    new Chart(ctx2, {
        type: 'bar',
        data: {
            labels: [
                <% porMes.forEach(m => { %> "<%= m.mes %>", <% }) %>
            ],
            datasets: [{
                la
